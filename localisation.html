<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Localisation Guide - The Aura User Guide</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="A full usage guide for Aura.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="introduction.html">Introduction</a></li><li class="chapter-item expanded "><a href="philosophy.html"><strong aria-hidden="true">1.</strong> Philosophy</a></li><li class="chapter-item expanded "><a href="install.html"><strong aria-hidden="true">2.</strong> Installation</a></li><li class="chapter-item expanded "><a href="usage.html"><strong aria-hidden="true">3.</strong> Usage</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="pacman.html"><strong aria-hidden="true">3.1.</strong> Aura-as-Pacman</a></li><li class="chapter-item expanded "><a href="aur.html"><strong aria-hidden="true">3.2.</strong> Installing AUR Packages</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="storage.html"><strong aria-hidden="true">3.2.1.</strong> Package Storage Locations</a></li></ol></li><li class="chapter-item expanded "><a href="downgrading.html"><strong aria-hidden="true">3.3.</strong> Downgrading Packages</a></li><li class="chapter-item expanded "><a href="orphans.html"><strong aria-hidden="true">3.4.</strong> Managing Orphan Packages</a></li><li class="chapter-item expanded "><a href="snapshots.html"><strong aria-hidden="true">3.5.</strong> Package Set Snapshots</a></li><li class="chapter-item expanded "><a href="log.html"><strong aria-hidden="true">3.6.</strong> Log Interaction</a></li><li class="chapter-item expanded "><a href="deps.html"><strong aria-hidden="true">3.7.</strong> Dependency Analysis</a></li></ol></li><li class="chapter-item expanded "><a href="configuration.html"><strong aria-hidden="true">4.</strong> Configuration</a></li><li class="chapter-item expanded "><a href="appendix.html"><strong aria-hidden="true">5.</strong> Appendix</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="search.html"><strong aria-hidden="true">5.1.</strong> AUR Search Behaviour</a></li><li class="chapter-item expanded "><a href="localisation.html" class="active"><strong aria-hidden="true">5.2.</strong> Localisation Guide</a></li><li class="chapter-item expanded "><a href="migration.html"><strong aria-hidden="true">5.3.</strong> Migration Guide (v3 to v4)</a></li><li class="chapter-item expanded "><a href="faq.html"><strong aria-hidden="true">5.4.</strong> FAQ</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Aura User Guide</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/fosskers/aura" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="language-localisation-guide"><a class="header" href="#language-localisation-guide">Language Localisation Guide</a></h1>
<p>Welcome! こんにちは！ Saluton!</p>
<p>If you're reading this then it's likely that you want to help localise Aura into
another language. Arch users everywhere can benefit from your contribution, and
it's a great opportunity to contribute to Free Software.</p>
<h2 id="what-you-need"><a class="header" href="#what-you-need">What You Need</a></h2>
<ol>
<li>
<p><a href="https://github.com/fosskers/aura">The Aura source code</a>.</p>
</li>
<li>
<p>An editor. Whichever one you like.</p>
</li>
<li>
<p><code>git</code>. As Aura is hosted on github, cloning, making changes and adding pull
requests will be easiest if you have a working git/github setup.</p>
</li>
<li>
<p>A brain (hopefully yours) with a language in it. As for me, no hablo español,
Я не могу говорить по-русски, nor do I يتكلم العربية, so that's where you
come in.</p>
</li>
</ol>
<h2 id="localisation"><a class="header" href="#localisation">Localisation</a></h2>
<p>The first thing to determine is whether you are extending some existing
translations or writing a new set. If you're extending an existing set, skip to
Step Two.</p>
<p>Aura utilises Mozilla's <a href="https://projectfluent.org/">Fluent Project</a> for
localisation. The format is text-based and straight-forward, and also allows for
special plural handling. See the <a href="https://projectfluent.org/fluent/guide/">Fluent
Guide</a> for more information.</p>
<p>In the examples below, we will pretend to add localisations for Latin.</p>
<h3 id="step-one---establish-a-new-localisation-file"><a class="header" href="#step-one---establish-a-new-localisation-file">Step One - Establish a new Localisation File</a></h3>
<p>You will find all localisation files under <code>rust/aura-pm/i18n/</code>. There is a
subdirectory for each language. To add one for Latin, we first <a href="https://simplelocalize.io/data/locales/">look up its
locale code</a> and find it to be <code>la-VA</code>,
associated with Vatican City.</p>
<pre><code>mkdir la-VA
cp en-US/aura_pm.ftl la-VA/
</code></pre>
<p>We have copied over the English translations as a base.</p>
<h3 id="step-two---translate-the-english"><a class="header" href="#step-two---translate-the-english">Step Two - Translate the English</a></h3>
<p>The top section of the file looks like:</p>
<pre><code>language-name = English

# AUR Packages (-A)
A-install-deps = Determining dependencies...
A-install-repo-pkgs = Repository dependencies:
A-install-aur-pkgs = AUR packages:
A-install-path-comp = Failed to extract final component of: { $path }
A-install-ignored = { $file } is marked "ignored". Install anyway?
</code></pre>
<p><code>language-name</code> is important. This is the output used in <code>aura stats --lang</code>. We could make this:</p>
<pre><code>language-name = Lingua Latina
</code></pre>
<p>Then we continue, line by line, replacing the original English with Latin. For
example:</p>
<pre><code>A-build-continue = Permanere aliis packages aedificationem?
</code></pre>
<p>Some lines have "slots" of the format <code>{ $foo }</code>, where a value coming from Aura
will be used to complete the message:</p>
<pre><code class="language-diff">+A-build-e-filename = Defecit e filename eliciunt: { $file }
-A-build-e-filename = Failed to extract filename from: { $file }
</code></pre>
<blockquote>
<p><strong>💡 Tip:</strong> If you don't translate every line, Fluent will automatically fall
back to English for the ones that are missing. No error will occur.</p>
</blockquote>
<p>If you add a <code>#</code> to the beginning of a line, that will make it a "comment", thus
disabling it.</p>
<pre><code># Note: Translate this after I finish conquering the barbarian hordes.
# A-u-fetch-info = Fetching package information...
</code></pre>
<h3 id="step-three-optional---tell-the-rust-code-about-the-new-language"><a class="header" href="#step-three-optional---tell-the-rust-code-about-the-new-language">Step Three (Optional) - Tell the Rust Code about the New Language</a></h3>
<p>If you're capable with Rust, you can register the new language yourself.
Otherwise, I will do it after you submit your translations.</p>
<p>First, in <code>rust/aura-pm/src/lib.rs</code>, we tell the Rust about the new locale:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub const LATIN: LanguageIdentifier = langid!("la-VA");
<span class="boring">}</span></code></pre></pre>
<p>Then, within <code>rust/aura-pm/src/localization.rs</code>, we update the
<code>identifier_from_locale</code> function to include the language code for Latin:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub(crate) fn identifier_from_locale&lt;S&gt;(locale: S) -&gt; Option&lt;LanguageIdentifier&gt;
where
    S: AsRef&lt;str&gt;,
{
    match code_and_country(locale.as_ref()) {
        ("en", _) =&gt; Some(aura_pm::ENGLISH),
        // ... other languages ...
        ("la", _) =&gt; Some(aura_pm::LATIN),
        _ =&gt; None,
    }
}
<span class="boring">}</span></code></pre></pre>
<p>Next, we add a command-line flag for Latin within <code>rust/aura-pm/src/flags.rs</code>:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct Args {
    /// Output in Latin (alias: Latinus).
    #[clap(
        group = "language",
        long,
        global = true,
        alias = "latinus",
        hide_short_help = true,
        display_order = 10
    )]
    pub latin: bool,
    // ... more flags ...
<span class="boring">}</span></code></pre></pre>
<p>Thanks to the <code>alias</code>, we can turn on Latin with either <code>--latin</code> or
<code>--latinus</code>. Make sure to add both variants to the <code>AURA_GLOBALS</code> list. This is
important for interaction with Pacman.</p>
<p>Finally, back in <code>localization.rs</code>, we can give credit to ourselves for having
added Latin:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub(crate) const TRANSLATORS: &amp;[(&amp;str, &amp;str)] = &amp;[
    // ... other languages ...
    ("Korean", "\"Nioden\""),
    ("Latin", "Maximus Decimus Meridius")
    ("Norwegian", "\"chinatsun\""),
    // ... other languages ...
];
<span class="boring">}</span></code></pre></pre>
<p>Strength and honour, General.</p>
<h3 id="step-four---pull-request"><a class="header" href="#step-four---pull-request">Step Four - Pull Request</a></h3>
<p>With the translations complete, you'll need to tell us about it on Github.
Once your changes are looked over, we'll release a new version of Aura with
your language included as soon as possible. Provided you followed the above
instructions, this shouldn't take long. Furthermore, chances are we won't be
able to proofread the translation itself, as we probably don't speak your
language. You could hide your doomsday take-over plans in the code and no
one would know.</p>
<h3 id="step-six---youve-helped-others-who-speak-your-language"><a class="header" href="#step-six---youve-helped-others-who-speak-your-language">Step Six - You've Helped Others who Speak your Language</a></h3>
<p>You've done a great thing by increasing Aura's usability. Your name will be
included in both Aura's README and in its <code>thanks</code> message. Thank you for your
hard work!</p>
<h2 id="questions"><a class="header" href="#questions">Questions</a></h2>
<h3 id="how-do-i-test-my-translations"><a class="header" href="#how-do-i-test-my-translations">How do I test my translations?</a></h3>
<p>You will need to do Step Three first. To view your translation progress, you can
run:</p>
<pre><code>cargo run -- stats --lang
</code></pre>
<p>To see your translations in action, run some command:</p>
<pre><code>cargo run -- -Au --latin
</code></pre>
<h3 id="my-language-is-associated-with-multiple-countries-which-locale-code-should-i-choose"><a class="header" href="#my-language-is-associated-with-multiple-countries-which-locale-code-should-i-choose">My language is associated with multiple countries. Which locale code should I choose?</a></h3>
<p>The general rule is "the country it came from". This applies to languages like
Spanish and Portuguese, whose countries established colonies across the world
that now outpopulate their land of origin. German and French as well, which have
strong footholds in Europe across many countries. The exception is English, as
<code>en-US</code> is the dominant locale of technology and the internet.</p>
<p>If the country and language name don't match, then pick the place with the most
native speakers. This would apply to languages like Farsi (Persian), primarily
spoken in Iran.</p>
<p>If the language has a language code but not any associated country, like
Esperanto, then invent one (e.g. <code>eo-EO</code>). Fluent <a href="https://github.com/kellpossible/cargo-i18n/issues/52">won't know the difference</a>.</p>
<p>If for political reasons you have difficulty recognizing the country currently
associated with the language, we ask you to put those concerns aside at least
for the naming of the directory. Within Aura's code, output messages are
selected based on the language portion of the locale only, not the country, so
you're free to set it as you wish. Further, if you wish to provide separate
localisations for a specific country whose language is shared across many (for
instance, the various <code>zh</code> Chinese languages), Aura's code can be altered to
specifically dispatch on that country. Please bring it up when discussing your
submission.</p>
<p>If you're still unsure, please ask.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="search.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="migration.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="search.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="migration.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
